\chapter{Starting Dummy Database Insertion Script}\label{app:start_wait_db_inserter_parallel}
\begin{lstlisting}[language=bash,caption=Script that starts and waits for the dummy database insertion app in parallel on all connected devices,label=lst:start_wait_db_inserter_parallel]
#!/bin/bash
dummy_inserter() {
    $ANDROID_HOME/platform-tools/adb -s $1 shell am start -n dk.aau.cs.giraf.dummydbinserter/dk.aau.cs.giraf.dummydbinserter.MainActivity

    IS_RUNNING="$($ANDROID_HOME/platform-tools/adb -s $1 shell ps | grep dk.aau.cs.giraf.dummydbinserter)"

    while [ "$IS_RUNNING" ]
    do
        IS_RUNNING="$($ANDROID_HOME/platform-tools/adb -s $1 shell ps | grep dk.aau.cs.giraf.dummydbinserter)"
        sleep 2
    done

    echo "finished dummy insertion"
}
export -f dummy_inserter

SERIAL_NUMBER="$(/srv/scripts/get_serial_numbers.sh)"

parallel dummy_inserter ::: $SERIAL_NUMBER
\end{lstlisting}